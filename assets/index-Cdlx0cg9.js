import{e as k,c4 as D,r as a,c5 as A,j as e,h as F,F as T,P as U,S as I,i as p,B as R}from"./index-Bk4IGyyw.js";import{R as y}from"./index-DVvLdp5u.js";import{C as u}from"./index-B1KFTvKf.js";import{u as B}from"./useGetErrors-Bhs_yQR9.js";import{t as C}from"./index-BQLJ3bR0.js";import{c as P,d as $,a as s}from"./index.esm-HV-rroxz.js";import"./index-XGLfgjY2.js";import"./Trash-CnZpzmDU.js";P().shape({id:$().required("Id is required"),title_en:s().required("Title is required"),title_np:s().required("Title is required"),description_en:s().required("Description is required"),description_np:s().required("Description is required")});const J=()=>{var c;const l="about-section",m={id:"",title_en:"",title_np:"",description_en:"",description_np:"",image:""},{control:r,handleSubmit:f,reset:b}=k({defaultValues:m}),{data:t,isLoading:x}=D(l),[i,o]=a.useState({}),{mutateAsync:g,isPending:E,isError:n,error:d}=A();a.useEffect(()=>{t&&b(t==null?void 0:t.data)},[t]),a.useEffect(()=>{n&&o(B(d))},[n,d]);const _=async h=>{o({});const{id:j,...q}=h,S=C(q);(await g({id:j,data:S})).status===400&&o({})};return x?e.jsx(F,{}):e.jsxs(T,{flexDir:"column",gap:4,children:[e.jsx(U,{heading:"About Us",description:"Update the about us section"}),e.jsx(I,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{noValidate:!0,id:"section-form-about-conditions",onSubmit:f(_),children:[e.jsx(p,{control:r,name:"title_en",label:"Title (En)",required:!0,backendError:i.title_en}),e.jsx(p,{control:r,name:"title_en",label:"Title (Np)",required:!0,backendError:i.title_en}),e.jsx(u,{control:r,name:"description_en",label:"Description (En)",backendError:i.description_en}),e.jsx(u,{control:r,name:"description_np",label:"Description (Np)",backendError:i.description_np}),e.jsx(y,{control:r,name:"image",label:"Image",backendError:i.image,boxWidth:"full",boxHeight:"full",file:((c=t==null?void 0:t.data)==null?void 0:c.image)??"",boxAspectRatio:21/9,options:{accept:{"image/*":[]}}})]})}),e.jsx(R,{loading:E,type:"submit",form:"section-form-about-conditions",children:"Save"})]})};export{J as default};
