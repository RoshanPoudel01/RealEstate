import{e as P,g as v,f as u,r as i,b as F,j as e,c as N,F as z,P as G,S as I,d as n,v as L,T as A,L as C,G as R,B as l,t as T}from"./index-bCx-inYw.js";import{o as w}from"./yup-D4aqHEL3.js";import{R as B}from"./index-Ci5V0Y3u.js";import{u as M}from"./useGetDirtyData-Dc4_-Xhu.js";import{u as $}from"./useGetErrors-Bhs_yQR9.js";import{c as U,a as t,b as V}from"./index.esm-BWisaPV8.js";import"./index-CA223cgN.js";import"./Trash-C-L3NOCj.js";const H=()=>P({url:u.settings.fetch,queryKey:["settings"]}),K=()=>v({url:u.settings.update,method:"POST",invalidates:["settings"]}),Y=U().shape({name_en:t().required("Name is required"),name_np:t().required("Name is required"),phone_en:t().required("Phone is required"),phone_np:t().required("Phone is required"),address_en:t().required("Address is required"),address_np:t().required("Address is required"),description_en:t().required("Description is required"),description_np:t().required("Description is required"),email:t().email().required("Email is required"),facebook:t(),instagram:t(),youtube:t(),google_map:t(),logo:V()}),ne=()=>{const g={name_en:"",name_np:"",phone_en:"",phone_np:"",address_en:"",address_np:"",description_en:"",description_np:"",email:"",facebook:"",instagram:"",youtube:"",google_map:"",logo:""},[a,d]=i.useState(!1),{control:r,handleSubmit:b,reset:x,formState:_}=F({defaultValues:g,resolver:w(Y)}),[f,h]=i.useState(!1),{data:s,isPending:j,isFetching:q}=H(),{mutateAsync:y,isPending:E,isError:m,error:c}=K(),[o,S]=i.useState({});i.useEffect(()=>{m&&S($(c))},[m,c]),i.useEffect(()=>{s!=null&&s.data&&x(s.data)},[s]);const k=async O=>{const D=M(_,O),p=T(D);f&&p.append("remove_image","true"),(await y({data:p})).data&&d(!1)};return j||q?e.jsx(N,{}):e.jsxs(z,{flexDir:"column",gap:4,children:[e.jsx(G,{heading:"Settings",description:"Manage your website settings here"}),e.jsx(I,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{id:"setting-form",onSubmit:b(k),noValidate:!0,children:[e.jsx(n,{control:r,backendError:o.name_en,required:a,readOnly:!a,name:"name_en",label:"Name (En)"}),e.jsx(n,{control:r,backendError:o.name_np,required:a,readOnly:!a,name:"name_np",label:"Name (Np)"}),e.jsx(n,{control:r,backendError:o.phone_en,required:a,readOnly:!a,name:"phone_en",label:"Phone (En)"}),e.jsx(n,{control:r,backendError:o.phone_np,required:a,readOnly:!a,name:"phone_np",label:"Phone (Np)"}),e.jsx(n,{control:r,backendError:o.address_en,required:a,readOnly:!a,name:"address_en",label:"Address (En)"}),e.jsx(n,{control:r,backendError:o.address_np,required:a,readOnly:!a,name:"address_np",label:"Address (Np)"}),e.jsx(n,{control:r,backendError:o.description_en,name:"description_en",label:"Description (En)",type:"textarea"}),e.jsx(n,{control:r,backendError:o.description_np,name:"description_np",label:"Description (Np)",type:"textarea"}),e.jsx(n,{control:r,required:a,readOnly:!a,name:"email",label:"Email"}),e.jsx(n,{control:r,readOnly:!a,name:"facebook",label:"Facebook"}),e.jsx(n,{control:r,readOnly:!a,name:"instagram",label:"Instagram"}),e.jsx(n,{control:r,readOnly:!a,name:"youtube",label:"Youtube"}),e.jsx(n,{control:r,readOnly:!a,name:"google_map",label:"Google Map"})]})}),a?e.jsx(B,{control:r,name:"logo",label:"Logo",options:{accept:{"image/*":[]},maxSize:5},file:(s==null?void 0:s.data.logo)??"",setRemoveImage:h}):e.jsxs(L,{children:[e.jsx(A,{children:"Logo"}),e.jsx(C,{src:(s==null?void 0:s.data.logo)??"",alt:s==null?void 0:s.data.name,w:"150px"})]}),a?e.jsxs(R,{mt:4,children:[e.jsx(l,{variant:"outline",onClick:()=>d(!1),colorPalette:"gray",size:"sm",children:"Cancel"}),e.jsx(l,{form:"setting-form",type:"submit",loading:E,size:"sm",children:"Save"})]}):e.jsx(l,{onClick:()=>d(!0),size:"sm",children:"Edit"})]})};export{ne as default};
