import{c as y,d as B,r as o,u as C,e as D,f as H,g as w,j as e,h as N,F as U,S as $,P as G,i as S,H as V,B as b,t as z}from"./index-iYgY3VGR.js";import{o as L}from"./yup-MG1TkRzE.js";import{R as W}from"./index-Dps648_U.js";import{S as J}from"./index-Ba5YiIKJ.js";import{u as h}from"./useGetErrors-Bhs_yQR9.js";import{c as K,a as c,b as M}from"./index.esm-HcHLg7V9.js";import"./index-DrZBy5xu.js";import"./Trash-Q03gug3t.js";const O=K().shape({title_en:c().required("Title is required"),title_np:c().required("Title is required"),image:M().required("Image is required"),is_active:c().required("Status is required")}),ie=()=>{var x;const a={title_en:"",title_np:"",image:"",is_active:"1"},{id:r}=y(),{data:t,isPending:E,isFetching:v}=B(r);o.useEffect(()=>{t!=null&&t.data?s({...t==null?void 0:t.data,is_active:t!=null&&t.data.is_active?"1":"0"}):s(a)},[t]);const n=C(),{control:i,handleSubmit:j,reset:s}=D({defaultValues:a,resolver:L(O)}),{mutateAsync:_,isPending:q,isError:u,error:m}=H(),{mutateAsync:F,isPending:I,isError:p,error:g}=w(),[d,f]=o.useState({}),[A,P]=o.useState(!1);o.useEffect(()=>{u?f(h(m)):p&&f(h(g))},[u,m,p,g]);const k=async R=>{const l=z(R);A&&l.append("remove_image","1"),r?(await F({data:l,id:r})).data.status&&(s(a),n("/admin/sliders")):(await _({data:l})).data.status&&(s(a),n("/admin/sliders"))};return e.jsx(e.Fragment,{children:r&&(E||v)?e.jsx(N,{}):e.jsxs(U,{flexDir:"column",gap:8,children:[e.jsx($,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{id:"slider-form",onSubmit:j(k),noValidate:!0,children:[e.jsx(G,{heading:"Add Slider",description:"Add new slider"}),e.jsx(S,{control:i,required:!0,backendError:d.title_en,name:"title_en",label:"Title (EN)"}),e.jsx(S,{control:i,required:!0,backendError:d.title_np,name:"title_np",label:"Title (NP)"}),e.jsx(W,{control:i,required:!0,backendError:d.image,name:"image",label:"Image",options:{accept:{"image/*":[]}},boxWidth:"full",boxHeight:"full",boxAspectRatio:21/9,file:((x=t==null?void 0:t.data)==null?void 0:x.image)??"",setRemoveImage:P,helperText:"Image should be 21:9 aspect ratio."}),e.jsx(J,{control:i,required:!0,name:"is_active",label:"Status",options:[{label:"Active",value:"1"},{label:"Inactive",value:"0"}]})]})}),e.jsxs(V,{align:"center",children:[e.jsx(b,{onClick:()=>n(-1),variant:"outline",children:"Cancel"}),e.jsx(b,{form:"slider-form",loading:q||I,type:"submit",children:"Submit"})]})]})})};export{ie as default};
