import{c as y,d as B,r as n,u as C,e as D,f as w,g as H,j as e,h as N,F as U,S as $,P as G,i as S,H as V,B as b,t as z}from"./index-Dbk5Kekq.js";import{o as L}from"./yup-ZRJoT3J2.js";import{R as W}from"./index-D625bCdH.js";import{S as J}from"./index-BH1o9P-f.js";import{u as h}from"./useGetErrors-Bhs_yQR9.js";import{c as K,a as c,b as M}from"./index.esm-DlJSMwng.js";import"./index-CKrq-tjg.js";import"./Trash-BjDGnoUu.js";const O=K().shape({title_en:c().required("Title is required"),title_np:c().required("Title is required"),image:M().required("Image is required"),is_active:c().required("Status is required")}),se=()=>{var x;const t={title_en:"",title_np:"",image:"",is_active:"1"},{id:r}=y(),{data:a,isPending:E,isFetching:v}=B(r);n.useEffect(()=>{a!=null&&a.data?i({...a==null?void 0:a.data,is_active:a!=null&&a.data.is_active?"1":"0"}):i(t)},[a]);const o=C(),{control:s,handleSubmit:j,reset:i}=D({defaultValues:t,resolver:L(O)}),{mutateAsync:_,isPending:q,isError:m,error:u}=w(),{mutateAsync:F,isPending:I,isError:p,error:g}=H(),[d,f]=n.useState({}),[A,P]=n.useState(!1);n.useEffect(()=>{m?f(h(u)):p&&f(h(g))},[m,u,p,g]);const k=async R=>{const l=z(R);A&&l.append("remove_image","1"),r?(await F({data:l,id:r})).data.status&&(i(t),o("/admin/sliders")):(await _({data:l})).data.status&&(i(t),o("/admin/sliders"))};return e.jsx(e.Fragment,{children:r&&(E||v)?e.jsx(N,{}):e.jsxs(U,{flexDir:"column",gap:8,children:[e.jsx($,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{id:"slider-form",onSubmit:j(k),noValidate:!0,children:[e.jsx(G,{heading:"Add Slider",description:"Add new slider"}),e.jsx(S,{control:s,required:!0,backendError:d.title_en,name:"title_en",label:"Title (EN)"}),e.jsx(S,{control:s,required:!0,backendError:d.title_np,name:"title_np",label:"Title (NP)"}),e.jsx(W,{control:s,required:!0,backendError:d.image,name:"image",label:"Image",options:{accept:{"image/*":[]}},boxWidth:{base:"250px",sm:"350px",md:"500px"},boxAspectRatio:21/9,file:((x=a==null?void 0:a.data)==null?void 0:x.image)??"",setRemoveImage:P,helperText:"Image should be 21:9 aspect ratio."}),e.jsx(J,{control:s,required:!0,name:"is_active",label:"Status",options:[{label:"Active",value:"1"},{label:"Inactive",value:"0"}]})]})}),e.jsxs(V,{align:"center",children:[e.jsx(b,{onClick:()=>o(-1),variant:"outline",children:"Cancel"}),e.jsx(b,{form:"slider-form",loading:q||I,type:"submit",children:"Submit"})]})]})})};export{se as default};
