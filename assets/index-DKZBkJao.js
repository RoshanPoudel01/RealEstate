import{E as O,G as P,I as u,r as i,e as D,j as e,h as F,F as N,P as v,S as I,i as n,J as z,T as L,L as A,K as G,B as l,t as C}from"./index-CEKF-M9F.js";import{o as R}from"./yup-Poyy-UZ9.js";import{R as T}from"./index-Dfl533gL.js";import{u as w}from"./useGetErrors-Bhs_yQR9.js";import{c as B,a as t,b as M}from"./index.esm-BXiU1N2R.js";import"./index-C4rAyCRN.js";import"./Trash-BIZCWG37.js";const $=()=>O({url:u.settings.fetch,queryKey:["settings"]}),K=()=>P({url:u.settings.update,method:"POST",invalidates:["settings"]}),U=B().shape({name_en:t().required("Name is required"),name_np:t().required("Name is required"),phone_en:t().required("Phone is required"),phone_np:t().required("Phone is required"),address_en:t().required("Address is required"),address_np:t().required("Address is required"),description_en:t().required("Description is required"),description_np:t().required("Description is required"),email:t().email().required("Email is required"),facebook:t(),instagram:t(),youtube:t(),google_map:t(),logo:M()}),ee=()=>{const g={name_en:"",name_np:"",phone_en:"",phone_np:"",address_en:"",address_np:"",description_en:"",description_np:"",email:"",facebook:"",instagram:"",youtube:"",google_map:"",logo:""},[a,d]=i.useState(!1),{control:r,handleSubmit:b,reset:x}=D({defaultValues:g,resolver:R(U)}),[_,h]=i.useState(!1),{data:s,isPending:f,isFetching:j}=$(),{mutateAsync:q,isPending:E,isError:m,error:p}=K(),[o,y]=i.useState({});i.useEffect(()=>{m&&y(w(p))},[m,p]),i.useEffect(()=>{s!=null&&s.data&&x(s.data)},[s]);const k=async S=>{const c=C(S);_&&c.append("remove_image","true"),(await q({data:c})).data&&d(!1)};return f||j?e.jsx(F,{}):e.jsxs(N,{flexDir:"column",gap:4,children:[e.jsx(v,{heading:"Settings",description:"Manage your website settings here"}),e.jsx(I,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{id:"setting-form",onSubmit:b(k),noValidate:!0,children:[e.jsx(n,{control:r,backendError:o.name_en,required:a,readOnly:!a,name:"name_en",label:"Name (En)"}),e.jsx(n,{control:r,backendError:o.name_np,required:a,readOnly:!a,name:"name_np",label:"Name (Np)"}),e.jsx(n,{control:r,backendError:o.phone_en,required:a,readOnly:!a,name:"phone_en",label:"Phone (En)"}),e.jsx(n,{control:r,backendError:o.phone_np,required:a,readOnly:!a,name:"phone_np",label:"Phone (Np)"}),e.jsx(n,{control:r,backendError:o.address_en,required:a,readOnly:!a,name:"address_en",label:"Address (En)"}),e.jsx(n,{control:r,backendError:o.address_np,required:a,readOnly:!a,name:"address_np",label:"Address (Np)"}),e.jsx(n,{control:r,backendError:o.description_en,name:"description_en",label:"Description (En)",type:"textarea"}),e.jsx(n,{control:r,backendError:o.description_np,name:"description_np",label:"Description (Np)",type:"textarea"}),e.jsx(n,{control:r,required:a,readOnly:!a,name:"email",label:"Email"}),e.jsx(n,{control:r,readOnly:!a,name:"facebook",label:"Facebook"}),e.jsx(n,{control:r,readOnly:!a,name:"instagram",label:"Instagram"}),e.jsx(n,{control:r,readOnly:!a,name:"youtube",label:"Youtube"}),e.jsx(n,{control:r,readOnly:!a,name:"google_map",label:"Google Map"})]})}),a?e.jsx(T,{control:r,name:"logo",label:"Logo",options:{accept:{"image/*":[]},maxSize:5},file:(s==null?void 0:s.data.logo)??"",setRemoveImage:h}):e.jsxs(z,{children:[e.jsx(L,{children:"Logo"}),e.jsx(A,{src:(s==null?void 0:s.data.logo)??"",alt:s==null?void 0:s.data.name,w:"150px"})]}),a?e.jsxs(G,{mt:4,children:[e.jsx(l,{variant:"outline",onClick:()=>d(!1),colorPalette:"gray",size:"sm",children:"Cancel"}),e.jsx(l,{form:"setting-form",type:"submit",loading:E,size:"sm",children:"Save"})]}):e.jsx(l,{onClick:()=>d(!0),size:"sm",children:"Edit"})]})};export{ee as default};
