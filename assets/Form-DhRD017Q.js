import{a as R,k as T,r as c,u as B,b as C,l as $,m as w,j as e,c as G,F as H,S as O,P as U,d as s,H as z,B as S,t as V}from"./index-BVyWgP0Q.js";import{o as L}from"./yup-DXyx5UIZ.js";import{R as J}from"./index-CbALRGXo.js";import{S as K}from"./index-BorBKyUm.js";import{u as M}from"./useGetDirtyData-Dc4_-Xhu.js";import{u as v}from"./useGetErrors-Bhs_yQR9.js";import{c as Q,a as n,b as W,d as X}from"./index.esm-DXGjF0Z-.js";import"./index-jbnGfxiJ.js";import"./Trash-0YmnJkgT.js";const Y=Q().shape({title_en:n().required("Title is required"),title_np:n().required("Title is required"),description_en:n().required("Description is required"),description_np:n().required("Description is required"),image:W().required("Image is required"),is_active:n().required("Status is required"),display_order:X().required("Display Order is required").typeError("Display Order must be a number")}),de=()=>{var x;const o={title_en:"",title_np:"",description_en:"",description_np:"",image:"",is_active:"1",display_order:""},{id:a}=R(),{data:r,isPending:E,isFetching:q}=T(a);c.useEffect(()=>{r!=null&&r.data?d({...r==null?void 0:r.data,is_active:r!=null&&r.data.is_active?"1":"0"}):d(o)},[r]);const u=B(),{control:i,handleSubmit:j,reset:d,formState:y}=C({defaultValues:o,resolver:L(Y)}),{mutateAsync:h,isPending:D,isError:m,error:p}=$(),{mutateAsync:k,isPending:F,isError:f,error:g}=w(),[t,b]=c.useState({}),[P,I]=c.useState(!1);c.useEffect(()=>{m?b(v(p)):f&&b(v(g))},[m,p,f,g]);const A=async _=>{const l=V(a?M(y,_):_);P&&l.append("remove_image","1"),a?(await k({data:l,id:a})).data.status&&(d(o),u("/admin/services")):(await h({data:l})).data.status&&(d(o),u("/admin/services"))};return e.jsx(e.Fragment,{children:a&&(E||q)?e.jsx(G,{}):e.jsxs(H,{flexDir:"column",gap:8,children:[e.jsx(O,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{id:"service-form",onSubmit:j(A),noValidate:!0,children:[e.jsx(U,{heading:"Add Service",description:"Add new service"}),e.jsx(s,{control:i,required:!0,backendError:t.title_en,name:"title_en",label:"Title (EN)"}),e.jsx(s,{control:i,required:!0,backendError:t.title_np,name:"title_np",label:"Title (NP)"}),e.jsx(s,{control:i,required:!0,backendError:t.description_en,name:"description_en",label:"Description (EN)",type:"textarea"}),e.jsx(s,{control:i,required:!0,backendError:t.description_np,name:"description_np",label:"Description (NP)",type:"textarea"}),e.jsx(s,{control:i,required:!0,backendError:t.display_order,name:"display_order",label:"Display Order",type:"number"}),e.jsx(K,{control:i,required:!0,name:"is_active",label:"Status",options:[{label:"Active",value:"1"},{label:"Inactive",value:"0"}]}),e.jsx(J,{control:i,required:!0,backendError:t.image,name:"image",label:"Image",options:{accept:{"image/*":[]},maxSize:5},file:((x=r==null?void 0:r.data)==null?void 0:x.image)??"",setRemoveImage:I})]})}),e.jsxs(z,{align:"center",children:[e.jsx(S,{onClick:()=>u(-1),variant:"outline",children:"Cancel"}),e.jsx(S,{form:"service-form",loading:D||F,type:"submit",children:"Submit"})]})]})})};export{de as default};
