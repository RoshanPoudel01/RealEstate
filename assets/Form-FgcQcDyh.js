import{a as N,r as d,u as R,b as T,j as e,c as B,F as D,S as w,P as H,d as c,H as U,B as x,t as $}from"./index-Du8Lk3Q-.js";import{o as z}from"./yup-B4homyw4.js";import{R as G}from"./index-51HeTNiI.js";import{S as V}from"./index-BATexjU2.js";import{u as _}from"./useGetErrors-Bhs_yQR9.js";import{b as L,c as J,d as K}from"./service-sliders-BIc5GB_4.js";import{c as M,a as i,b as O}from"./index.esm-DPFBS4_k.js";import"./index-yPg3TB0L.js";import"./Trash-CQcPQ2X9.js";const Q=M().shape({title_en:i().required("Title is required"),title_np:i().required("Title is required"),caption_en:i().required("Caption is required"),caption_np:i().required("Caption is required"),image:O().required("Image is required"),is_active:i().required("Status is required")}),ne=()=>{var b;const s={title_en:"",title_np:"",caption_en:"",caption_np:"",image:"",is_active:"1"},{id:n}=N(),{data:a,isPending:E,isFetching:q}=L(n);d.useEffect(()=>{a!=null&&a.data?o({...a==null?void 0:a.data,is_active:a!=null&&a.data.is_active?"1":"0"}):o(s)},[a]);const l=R(),{control:r,handleSubmit:j,reset:o,formState:W}=T({defaultValues:s,resolver:z(Q)}),{mutateAsync:v,isPending:h,isError:m,error:p}=J(),{mutateAsync:k,isPending:F,isError:f,error:g}=K(),[t,S]=d.useState({}),[P,C]=d.useState(!1);d.useEffect(()=>{m?S(_(p)):f&&S(_(g))},[m,p,f,g]);const I=async A=>{const u=$(A);P&&u.append("remove_image","1"),n?(await k({data:u,id:n})).data.status&&(o(s),l("/admin/sliders")):(await v({data:u})).data.status&&(o(s),l("/admin/sliders"))};return e.jsx(e.Fragment,{children:n&&(E||q)?e.jsx(B,{}):e.jsxs(D,{flexDir:"column",gap:8,children:[e.jsx(w,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{id:"slider-form",onSubmit:j(I),noValidate:!0,children:[e.jsx(H,{heading:"Add Slider",description:"Add new slider"}),e.jsx(c,{control:r,required:!0,backendError:t.title_en,name:"title_en",label:"Title (EN)"}),e.jsx(c,{control:r,required:!0,backendError:t.title_np,name:"title_np",label:"Title (NP)"}),e.jsx(c,{control:r,required:!0,backendError:t.caption_en,name:"caption_en",label:"Caption (EN)"}),e.jsx(c,{control:r,required:!0,backendError:t.caption_np,name:"caption_np",label:"Caption (NP)"}),e.jsx(G,{control:r,required:!0,backendError:t.image,name:"image",label:"Image",options:{accept:{"image/*":[]},maxSize:5},file:((b=a==null?void 0:a.data)==null?void 0:b.image)??"",setRemoveImage:C}),e.jsx(V,{control:r,required:!0,name:"is_active",label:"Status",options:[{label:"Active",value:"1"},{label:"Inactive",value:"0"}]})]})}),e.jsxs(U,{align:"center",children:[e.jsx(x,{onClick:()=>l(-1),variant:"outline",children:"Cancel"}),e.jsx(x,{form:"slider-form",loading:h||F,type:"submit",children:"Submit"})]})]})})};export{ne as default};
