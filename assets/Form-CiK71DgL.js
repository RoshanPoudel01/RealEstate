import{a as N,r as d,u as R,b as T,j as e,c as B,F as w,S as G,P as H,d as c,H as U,B as _,t as $}from"./index-CoRq1SEl.js";import{c as z,a as s,b as V,o as L}from"./index.esm-DeNjg6l_.js";import{R as J}from"./index-BdOjca5U.js";import{S as K}from"./index-kUnOPZqm.js";import{u as M}from"./useGetDirtyData-Dc4_-Xhu.js";import{u as E}from"./useGetErrors-Bhs_yQR9.js";import{b as O,c as Q,d as W}from"./service-sliders-CHzSauQB.js";import"./Trash-CaPAxoks.js";const X=z().shape({title_en:s().required("Title is required"),title_np:s().required("Title is required"),caption_en:s().required("Caption is required"),caption_np:s().required("Caption is required"),image:V().required("Image is required"),is_active:s().required("Status is required")}),ne=()=>{var b;const n={title_en:"",title_np:"",caption_en:"",caption_np:"",image:"",is_active:"1"},{id:t}=N(),{data:a,isPending:q,isFetching:j}=O(t);d.useEffect(()=>{a!=null&&a.data?o({...a==null?void 0:a.data,is_active:a!=null&&a.data.is_active?"1":"0"}):o(n)},[a]);const l=R(),{control:r,handleSubmit:v,reset:o,formState:h}=T({defaultValues:n,resolver:L(X)}),{mutateAsync:k,isPending:F,isError:m,error:p}=Q(),{mutateAsync:P,isPending:C,isError:f,error:g}=W(),[i,S]=d.useState({}),[I,A]=d.useState(!1);d.useEffect(()=>{m?S(E(p)):f&&S(E(g))},[m,p,f,g]);const y=async x=>{const u=$(t?M(h,x):x);I&&u.append("remove_image","1"),t?(await P({data:u,id:t})).data.status&&(o(n),l("/admin/sliders")):(await k({data:u})).data.status&&(o(n),l("/admin/sliders"))};return e.jsx(e.Fragment,{children:t&&(q||j)?e.jsx(B,{}):e.jsxs(w,{flexDir:"column",gap:8,children:[e.jsx(G,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{id:"slider-form",onSubmit:v(y),noValidate:!0,children:[e.jsx(H,{heading:"Add Slider",description:"Add new slider"}),e.jsx(c,{control:r,required:!0,backendError:i.title_en,name:"title_en",label:"Title (EN)"}),e.jsx(c,{control:r,required:!0,backendError:i.title_np,name:"title_np",label:"Title (NP)"}),e.jsx(c,{control:r,required:!0,backendError:i.caption_en,name:"caption_en",label:"Caption (EN)"}),e.jsx(c,{control:r,required:!0,backendError:i.caption_np,name:"caption_np",label:"Caption (NP)"}),e.jsx(J,{control:r,required:!0,backendError:i.image,name:"image",label:"Image",options:{accept:{"image/*":[]},maxSize:5},file:((b=a==null?void 0:a.data)==null?void 0:b.image)??"",setRemoveImage:A}),e.jsx(K,{control:r,required:!0,name:"is_active",label:"Status",options:[{label:"Active",value:"1"},{label:"Inactive",value:"0"}]})]})}),e.jsxs(U,{align:"center",children:[e.jsx(_,{onClick:()=>l(-1),variant:"outline",children:"Cancel"}),e.jsx(_,{form:"slider-form",loading:F||C,type:"submit",children:"Submit"})]})]})})};export{ne as default};
