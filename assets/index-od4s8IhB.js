import{R as r,r as p,Z as z,j as e,ac as W,ad as F,B as T,F as _,aZ as L,b as N,a_ as k,a$ as q,b0 as U,v as $,d as D,t as G,b1 as J,D as Q,H as V,T as O,L as X,b2 as Y}from"./index-Dupaq89U.js";import{u as ee,S as ae}from"./useSearchParamState-_yc8daph.js";import{a as te,b as se,c as re,d as ne,e as ie,f as oe,g as le,h as ce,i as de,D as me}from"./DeleteAlert-D6xD4u2K.js";import{R as ue}from"./index-zuOt2SYm.js";import{P as he}from"./Pencil-DseIO4AP.js";import{S as pe}from"./index-DoZWIcWq.js";import{u as C}from"./useGetErrors-Bhs_yQR9.js";import"./Trash-CTEP7qOq.js";const ge=new Map([["bold",r.createElement(r.Fragment,null,r.createElement("path",{d:"M228,128a12,12,0,0,1-12,12H140v76a12,12,0,0,1-24,0V140H40a12,12,0,0,1,0-24h76V40a12,12,0,0,1,24,0v76h76A12,12,0,0,1,228,128Z"}))],["duotone",r.createElement(r.Fragment,null,r.createElement("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"}),r.createElement("path",{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"}))],["fill",r.createElement(r.Fragment,null,r.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,136H136v48a8,8,0,0,1-16,0V136H72a8,8,0,0,1,0-16h48V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"}))],["light",r.createElement(r.Fragment,null,r.createElement("path",{d:"M222,128a6,6,0,0,1-6,6H134v82a6,6,0,0,1-12,0V134H40a6,6,0,0,1,0-12h82V40a6,6,0,0,1,12,0v82h82A6,6,0,0,1,222,128Z"}))],["regular",r.createElement(r.Fragment,null,r.createElement("path",{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"}))],["thin",r.createElement(r.Fragment,null,r.createElement("path",{d:"M220,128a4,4,0,0,1-4,4H132v84a4,4,0,0,1-8,0V132H40a4,4,0,0,1,0-8h84V40a4,4,0,0,1,8,0v84h84A4,4,0,0,1,220,128Z"}))]]);var xe=Object.defineProperty,fe=Object.defineProperties,je=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,I=(a,t,s)=>t in a?xe(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,ve=(a,t)=>{for(var s in t||(t={}))be.call(t,s)&&I(a,s,t[s]);if(M)for(var s of M(t))ye.call(t,s)&&I(a,s,t[s]);return a},Ee=(a,t)=>fe(a,je(t));const Z=p.forwardRef((a,t)=>r.createElement(z,Ee(ve({ref:t},a),{weights:ge})));Z.displayName="Plus";const Se=({onSubmit:a,id:t,heading:s,children:b,submitText:n,isSubmitting:g,isFetching:c,cancelText:y,trigger:x,open:d,onOpenChange:f,onClose:m,formId:u="modal-form",...h})=>e.jsxs(te,{open:d,onOpenChange:j=>{m&&m(),f(j.open)},scrollBehavior:"inside",lazyMount:!0,unmountOnExit:!0,motionPreset:"slide-in-top",preventScroll:!0,children:[e.jsx(se,{asChild:!0,children:x||(t?e.jsx(W,{borderRadius:5,colorPalette:"blue",variant:"subtle","aria-label":"Edit",children:e.jsx(F,{asChild:!0,boxSize:6,children:e.jsx(he,{})})}):e.jsxs(T,{colorPalette:"primary","aria-label":"Delete",children:[e.jsx(F,{asChild:!0,boxSize:6,children:e.jsx(Z,{})}),"Add"]}))}),e.jsxs(re,{...h,mx:2,children:[e.jsx(ne,{children:e.jsx(ie,{children:s||(t?"Edit":"Add")})}),e.jsx(oe,{asChild:!0,children:c&&t?e.jsx(_,{justify:"center",align:"center",h:"50vh",children:e.jsx(L,{size:"xl",borderWidth:"2px",animationDuration:"0.65s",color:"primary.500"})}):e.jsx("form",{id:u,onSubmit:a,noValidate:!0,children:b})}),e.jsxs(le,{children:[e.jsx(ce,{asChild:!0,children:e.jsx(T,{variant:"outline",children:y??"Close"})}),e.jsx(T,{colorPalette:"primary",loading:g,type:"submit",form:u,children:n??"Submit"})]}),e.jsx(de,{})]})]}),R=({id:a})=>{var w;const t={name:"",title:"",message:"",image:"",is_active:"1"},{control:s,handleSubmit:b,reset:n}=N({defaultValues:t}),[g,c]=p.useState(!1),{mutateAsync:y,isPending:x,isError:d,error:f}=k(),{mutateAsync:m,isPending:u,isError:h,error:j}=q(),[i,l]=p.useState({}),{data:o,isPending:v,isFetching:E}=U({id:a,enabled:g});p.useEffect(()=>{o!=null&&o.data&&n({name:o.data.name??"",title:o.data.title??"",message:o.data.message??"",image:o.data.image??"",is_active:o.data.is_active.toString()})},[o,a]),p.useEffect(()=>{d&&l(C(f)),h&&l(C(j))},[d,h]);const S=async B=>{var H,P;const A=G(B);a?(H=(await m({id:a,data:A})).data)!=null&&H.status&&(n(t),c(!1)):(P=(await y({data:A})).data)!=null&&P.status&&(n(t),c(!1))};return e.jsx(Se,{onOpenChange:c,open:g,formId:"testimonial-form",heading:a?"Edit Testimonial":"Add Testimonial",isSubmitting:x||u,isFetching:v||E,onSubmit:b(S),id:a?a+"":void 0,children:e.jsxs($,{children:[e.jsx(D,{name:"name",label:"Name",control:s,required:!0,backendError:i==null?void 0:i.name}),e.jsx(D,{name:"title",label:"Title",control:s,required:!0,backendError:i==null?void 0:i.title}),e.jsx(D,{name:"message",label:"Message",type:"textarea",control:s,required:!0,backendError:i==null?void 0:i.message}),e.jsx(ue,{name:"image",label:"Image",control:s,boxWidth:150,boxHeight:150,file:((w=o==null?void 0:o.data)==null?void 0:w.image)??"",options:{accept:{"image/*":[]}}}),e.jsx(pe,{name:"is_active",label:"Status",control:s})]})})},Oe=()=>{var d,f,m,u,h,j;const{pageIndex:a,setPageIndex:t,keyword:s,setKeyword:b}=ee(),{data:n,refetch:g,isPending:c,isFetching:y}=J({page:a,keyword:s}),x=[{header:"S.N",accessorKey:"s.no",cell:({row:i})=>{const{index:l}=i;return e.jsx(O,{children:(a-1)*10+l+1})}},{header:"Name",accessorKey:"name"},{header:"Title",accessorKey:"title"},{header:"Message",accessorKey:"message",cell:({row:i})=>{const{message:l}=i.original;return e.jsx(O,{minW:"300px",maxW:"300px",lineClamp:2,overflowWrap:"break-word",mx:"auto",children:l})}},{header:"Image",accessorKey:"image",cell:({row:i})=>{const{image:l}=i.original;return e.jsx(X,{src:l,alt:l,width:"70px",height:"70px",mx:"auto"})}},{header:"Action",accessorKey:"action",cell:({row:i})=>{const{id:l}=i.original,[o,v]=p.useState(!1),{mutateAsync:E,isPending:S}=Y();return e.jsxs(V,{w:"max-content",mx:"auto",children:[e.jsx(R,{id:l}),e.jsx(me,{open:o,setOpen:v,deleteText:"Delete",isDeleteLoading:S,heading:"Delete Team",description:"Are you sure you want to delete this team?",onConfirm:async()=>{await E({id:l}),v(!1)}})]})}}];return p.useEffect(()=>{g()},[a,s]),e.jsx(Q,{columns:x,data:((d=n==null?void 0:n.data)==null?void 0:d.rows)??[],count:((f=n==null?void 0:n.data)==null?void 0:f.count)??0,pagination:{manual:!0,pageCount:((u=(m=n==null?void 0:n.data)==null?void 0:m.pagination)==null?void 0:u.last_page)??0,totalRows:((j=(h=n==null?void 0:n.data)==null?void 0:h.pagination)==null?void 0:j.total)??0,pageParams:{pageIndex:a,setPageIndex:t}},isLoading:c||y,children:e.jsxs(V,{justify:"space-between",w:"full",children:[e.jsx(ae,{maxW:"300px",onSearch:b,placeholder:"Search Testimonials"}),e.jsx(R,{})]})})};export{Oe as default};
