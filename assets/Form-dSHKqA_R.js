import{a as N,k as R,r as c,u as T,b as B,l as C,m as $,j as e,c as w,F as H,S as O,P as U,d as t,H as z,B as _,t as G}from"./index-Du8Lk3Q-.js";import{o as V}from"./yup-B4homyw4.js";import{R as L}from"./index-51HeTNiI.js";import{S as J}from"./index-BATexjU2.js";import{u as S}from"./useGetErrors-Bhs_yQR9.js";import{c as K,a as s,b as M,d as Q}from"./index.esm-DPFBS4_k.js";import"./index-yPg3TB0L.js";import"./Trash-CQcPQ2X9.js";const W=K().shape({title_en:s().required("Title is required"),title_np:s().required("Title is required"),description_en:s().required("Description is required"),description_np:s().required("Description is required"),image:M().required("Image is required"),is_active:s().required("Status is required"),display_order:Q().required("Display Order is required").typeError("Display Order must be a number")}),ne=()=>{var x;const n={title_en:"",title_np:"",description_en:"",description_np:"",image:"",is_active:"1",display_order:""},{id:d}=N(),{data:r,isPending:v,isFetching:E}=R(d);c.useEffect(()=>{r!=null&&r.data?o({...r==null?void 0:r.data,is_active:r!=null&&r.data.is_active?"1":"0"}):o(n)},[r]);const u=T(),{control:i,handleSubmit:q,reset:o,formState:X}=B({defaultValues:n,resolver:V(W)}),{mutateAsync:j,isPending:y,isError:m,error:p}=C(),{mutateAsync:h,isPending:k,isError:g,error:f}=$(),[a,b]=c.useState({}),[D,F]=c.useState(!1);c.useEffect(()=>{m?b(S(p)):g&&b(S(f))},[m,p,g,f]);const P=async I=>{const l=G(I);D&&l.append("remove_image","1"),d?(await h({data:l,id:d})).data.status&&(o(n),u("/admin/services")):(await j({data:l})).data.status&&(o(n),u("/admin/services"))};return e.jsx(e.Fragment,{children:d&&(v||E)?e.jsx(w,{}):e.jsxs(H,{flexDir:"column",gap:8,children:[e.jsx(O,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{id:"service-form",onSubmit:q(P),noValidate:!0,children:[e.jsx(U,{heading:"Add Service",description:"Add new service"}),e.jsx(t,{control:i,required:!0,backendError:a.title_en,name:"title_en",label:"Title (EN)"}),e.jsx(t,{control:i,required:!0,backendError:a.title_np,name:"title_np",label:"Title (NP)"}),e.jsx(t,{control:i,required:!0,backendError:a.description_en,name:"description_en",label:"Description (EN)",type:"textarea"}),e.jsx(t,{control:i,required:!0,backendError:a.description_np,name:"description_np",label:"Description (NP)",type:"textarea"}),e.jsx(t,{control:i,required:!0,backendError:a.display_order,name:"display_order",label:"Display Order",type:"number"}),e.jsx(J,{control:i,required:!0,name:"is_active",label:"Status",options:[{label:"Active",value:"1"},{label:"Inactive",value:"0"}]}),e.jsx(L,{control:i,required:!0,backendError:a.image,name:"image",label:"Image",options:{accept:{"image/*":[]},maxSize:5},file:((x=r==null?void 0:r.data)==null?void 0:x.image)??"",setRemoveImage:F})]})}),e.jsxs(z,{align:"center",children:[e.jsx(_,{onClick:()=>u(-1),variant:"outline",children:"Cancel"}),e.jsx(_,{form:"service-form",loading:y||k,type:"submit",children:"Submit"})]})]})})};export{ne as default};
