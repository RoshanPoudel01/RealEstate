import{a as F,j as t,aP as y,u as P,b_ as k,r as a,b as D,b$ as B,c as I,F as R,P as q,S as N,d as o,B as T,t as w}from"./index-YxgpH73e.js";import{R as G}from"./index-DD0tdPAH.js";import{u as L}from"./useGetErrors-Bhs_yQR9.js";import"./Trash-Dt_VE1Ej.js";const U=()=>{const{id:s}=F();if(!s)return t.jsx(y,{title:"No Statistics Found",description:"Please enter the valid statistics id"});const c={title_en:"",title_np:"",value:"",image:""},f=P(),{mutateAsync:g,isPending:x,isError:d,error:l}=k(),[i,n]=a.useState({});a.useEffect(()=>{n(d?L(l):{})},[d,l]);const{control:r,handleSubmit:b,reset:u}=D({defaultValues:c}),{data:e,refetch:E,isPending:h,isFetching:S}=B(s);a.useEffect(()=>{(async()=>{await E()})()},[s]);const[j,_]=a.useState(!1);a.useEffect(()=>{e&&u({title_en:e.data.title_en,title_np:e.data.title_np,value:e.data.value,image:e.data.image})},[e]);const v=async m=>{const p=w(m);j&&p.append("remove_image","true"),(await g({id:s,data:p})).data.status&&(n({}),u(c),f("/admin/statistics"))};return h||S?t.jsx(I,{}):t.jsxs(R,{flexDir:"column",gap:4,children:[t.jsx(q,{heading:"Edit Statistics",description:"Edit your statistics here"}),t.jsx(N,{columns:{base:1,md:2},gap:4,asChild:!0,children:t.jsxs("form",{id:"statistics-form",onSubmit:b(v),children:[t.jsx(o,{name:"title_en",label:"Title (English)",control:r,required:!0,backendError:i.title_en}),t.jsx(o,{name:"title_np",label:"Title (Nepali)",control:r,required:!0,backendError:i.title_np}),t.jsx(o,{name:"value",label:"Value",control:r,required:!0,backendError:i.value}),t.jsx(G,{name:"image",control:r,options:{accept:{"image/*":[]}},file:(e==null?void 0:e.data.image)??"",backendError:i.image,setRemoveImage:_})]})}),t.jsx(T,{type:"submit",form:"statistics-form",loading:x,children:"Submit"})]})};export{U as default};
