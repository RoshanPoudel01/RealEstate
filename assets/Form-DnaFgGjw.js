import{u as N,b as R,a as A,R as f,r as b,j as r,c as B,F as $,P as w,S as H,d as s,H as O,B as x,t as U}from"./index-Du8Lk3Q-.js";import{o as z}from"./yup-B4homyw4.js";import{R as G}from"./index-51HeTNiI.js";import{S as V}from"./index-BATexjU2.js";import{u as E}from"./useGetErrors-Bhs_yQR9.js";import{b as L,c as T,d as J}from"./service-category-DxX1MMqb.js";import{c as K,a as n,b as M,d as Q}from"./index.esm-DPFBS4_k.js";import"./index-yPg3TB0L.js";import"./Trash-CQcPQ2X9.js";const W=K().shape({name_en:n().required("Name is required"),name_np:n().required("Name is required"),description_en:n().required("Description is required"),description_np:n().required("Description is required"),image:M().required("Image is required"),display_order:Q().required("Display Order is required").typeError("Display Order must be a number"),is_active:n().required()}),oe=()=>{const o={name_en:"",name_np:"",description_en:"",description_np:"",image:"",display_order:"",is_active:"1"},m=N(),{control:i,handleSubmit:y,reset:d,formState:X}=R({defaultValues:o,resolver:z(W)}),{id:a}=A(),{data:e,isPending:q,isFetching:h}=L(a),[j,S]=f.useState(!1);b.useEffect(()=>{d(a?{name_en:(e==null?void 0:e.data.name_en)??"",name_np:(e==null?void 0:e.data.name_np)??"",description_en:(e==null?void 0:e.data.description_en)??"",description_np:(e==null?void 0:e.data.description_np)??"",image:e==null?void 0:e.data.image,is_active:e!=null&&e.data.is_active?"1":"0",display_order:e==null?void 0:e.data.display_order}:o)},[a,e]);const{mutateAsync:C,isPending:k,isError:c,error:u}=T(),{mutateAsync:v,isPending:D,isError:l,error:_}=J(),[t,g]=f.useState({});b.useEffect(()=>{c?g(E(u)):l&&g(E(_))},[c,u,l,_]);const P=async F=>{const p=U(F);j&&p.append("remove_image","1"),a?(await v({data:p,id:a})).data.status&&(d(o),m("/admin/category")):(await C({data:p})).data.status&&(d(o),m("/admin/category"))};return a&&(q||h)?r.jsx(B,{}):r.jsxs($,{flexDir:"column",gap:4,children:[r.jsx(w,{heading:a?"Edit Category":"Add Category",description:a?"Edit the category details":"Add the category details"}),r.jsx(H,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:r.jsxs("form",{onSubmit:y(P),noValidate:!0,id:"category-form",children:[r.jsx(s,{control:i,required:!0,backendError:t.name_en,name:"name_en",label:"Name (En)"}),r.jsx(s,{control:i,required:!0,name:"name_np",label:"Name (Np)",backendError:t.name_np}),r.jsx(s,{control:i,required:!0,name:"description_en",label:"Description (En)",type:"textarea",backendError:t.description_en}),r.jsx(s,{control:i,required:!0,name:"description_np",label:"Description (Np)",type:"textarea",backendError:t.description_np}),r.jsx(s,{control:i,required:!0,name:"display_order",label:"Display Order",backendError:t.display_order,type:"number"}),r.jsx(V,{control:i,name:"is_active",label:"Status"}),r.jsx(G,{name:"image",control:i,required:!0,backendError:t.image,label:"Image",file:(e==null?void 0:e.data.image)??"",setRemoveImage:S,options:{accept:{"image/*":[]},maxSize:5},message:"Drop image here or click to upload"})]})}),r.jsxs(O,{mt:4,children:[r.jsx(x,{variant:"outline",colorPalette:"gray",onClick:()=>m(-1),children:"Back"}),r.jsx(x,{type:"submit",form:"category-form",colorPalette:"primary",color:"white",loading:k||D,children:"Submit"})]})]})};export{oe as default};
