import{a as F,p as w,r as m,u as R,b as A,q as U,s as B,j as e,c as C,F as L,S as $,P as H,d as s,H as O,B as x,t as z}from"./index-Du8Lk3Q-.js";import{o as G}from"./yup-B4homyw4.js";import{R as V}from"./index-51HeTNiI.js";import{S as J}from"./index-BATexjU2.js";import{u as q}from"./useGetErrors-Bhs_yQR9.js";import{c as K,a as t,b as M,d as Q}from"./index.esm-DPFBS4_k.js";import"./index-yPg3TB0L.js";import"./Trash-CQcPQ2X9.js";const W=K().shape({name_en:t().required("Name is required"),name_np:t().required("Name is required"),description_en:t().required("Description is required"),description_np:t().required("Description is required"),position_en:t().required("Position is required"),position_np:t().required("Position is required"),image:M().required("Image is required"),facebook:t().url("Invalid URL"),instagram:t().url("Invalid URL"),twitter:t().url("Invalid URL"),is_active:t().required("Status is required"),display_order:Q().required("Display Order is required").typeError("Display Order must be a number")}),ne=()=>{var f;const n={name_en:"",name_np:"",description_en:"",description_np:"",position_en:"",position_np:"",image:"",facebook:"",instagram:"",twitter:"",is_active:"1",display_order:""},{id:o}=F(),{data:r,isPending:E,isFetching:j}=w(o);m.useEffect(()=>{r!=null&&r.data?d({...r==null?void 0:r.data,is_active:r!=null&&r.data.is_active?"1":"0"}):d(n)},[r]);const c=R(),{control:a,handleSubmit:k,reset:d,formState:X}=A({defaultValues:n,resolver:G(W)}),{mutateAsync:v,isPending:y,isError:p,error:l}=U(),{mutateAsync:h,isPending:S,isError:b,error:g}=B(),[i,_]=m.useState({}),[P,I]=m.useState(!1);m.useEffect(()=>{p?_(q(l)):b&&_(q(g))},[p,l,b,g]);const D=async N=>{const u=z(N);P&&u.append("remove_image","1"),o?(await h({data:u,id:o})).data.status&&(d(n),c("/admin/teams")):(await v({data:u})).data.status&&(d(n),c("/admin/teams"))};return e.jsx(e.Fragment,{children:o&&(E||j)?e.jsx(C,{}):e.jsxs(L,{flexDir:"column",gap:8,children:[e.jsx($,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{id:"team-form",onSubmit:k(D),noValidate:!0,children:[e.jsx(H,{heading:"Add Team",description:"Add new team"}),e.jsx(s,{control:a,required:!0,backendError:i.name_en,name:"name_en",label:"Name (EN)"}),e.jsx(s,{control:a,required:!0,backendError:i.name_np,name:"name_np",label:"Name (NP)"}),e.jsx(s,{control:a,required:!0,backendError:i.description_en,name:"description_en",label:"Description (EN)",type:"textarea"}),e.jsx(s,{control:a,required:!0,backendError:i.description_np,name:"description_np",label:"Description (NP)",type:"textarea"}),e.jsx(s,{control:a,required:!0,backendError:i.position_en,name:"position_en",label:"Position (EN)"}),e.jsx(s,{control:a,required:!0,backendError:i.position_np,name:"position_np",label:"Position (NP)"}),e.jsx(s,{control:a,backendError:i.facebook,name:"facebook",label:"Facebook"}),e.jsx(s,{control:a,backendError:i.instagram,name:"instagram",label:"Instagram"}),e.jsx(s,{control:a,backendError:i.twitter,name:"twitter",label:"Twitter"}),e.jsx(s,{control:a,required:!0,backendError:i.display_order,name:"display_order",label:"Display Order",type:"number"}),e.jsx(J,{control:a,required:!0,name:"is_active",label:"Status",options:[{label:"Active",value:"1"},{label:"Inactive",value:"0"}]}),e.jsx(V,{control:a,required:!0,backendError:i.image,name:"image",label:"Image",options:{accept:{"image/*":[]},maxSize:5},file:((f=r==null?void 0:r.data)==null?void 0:f.image)??"",setRemoveImage:I})]})}),e.jsxs(O,{align:"center",children:[e.jsx(x,{onClick:()=>c(-1),variant:"outline",children:"Cancel"}),e.jsx(x,{form:"team-form",loading:y||S,type:"submit",children:"Submit"})]})]})})};export{ne as default};
