import{a as R,k as T,r as c,u as B,b as C,l as $,m as w,j as e,c as G,F as H,S as O,P as U,d as s,H as z,B as S,t as V}from"./index-Dupaq89U.js";import{c as L,a as n,b as J,d as K,o as M}from"./index.esm-WEjuTS9Z.js";import{R as Q}from"./index-zuOt2SYm.js";import{S as W}from"./index-DoZWIcWq.js";import{u as X}from"./useGetDirtyData-Dc4_-Xhu.js";import{u as v}from"./useGetErrors-Bhs_yQR9.js";import"./Trash-CTEP7qOq.js";const Y=L().shape({title_en:n().required("Title is required"),title_np:n().required("Title is required"),description_en:n().required("Description is required"),description_np:n().required("Description is required"),image:J().required("Image is required"),is_active:n().required("Status is required"),display_order:K().required("Display Order is required").typeError("Display Order must be a number")}),ne=()=>{var x;const d={title_en:"",title_np:"",description_en:"",description_np:"",image:"",is_active:"1",display_order:""},{id:t}=R(),{data:r,isPending:E,isFetching:q}=T(t);c.useEffect(()=>{r!=null&&r.data?o({...r==null?void 0:r.data,is_active:r!=null&&r.data.is_active?"1":"0"}):o(d)},[r]);const u=B(),{control:i,handleSubmit:j,reset:o,formState:y}=C({defaultValues:d,resolver:M(Y)}),{mutateAsync:h,isPending:D,isError:m,error:p}=$(),{mutateAsync:k,isPending:F,isError:g,error:f}=w(),[a,b]=c.useState({}),[P,I]=c.useState(!1);c.useEffect(()=>{m?b(v(p)):g&&b(v(f))},[m,p,g,f]);const A=async _=>{const l=V(t?X(y,_):_);P&&l.append("remove_image","1"),t?(await k({data:l,id:t})).data.status&&(o(d),u("/admin/services")):(await h({data:l})).data.status&&(o(d),u("/admin/services"))};return e.jsx(e.Fragment,{children:t&&(E||q)?e.jsx(G,{}):e.jsxs(H,{flexDir:"column",gap:8,children:[e.jsx(O,{alignItems:"start",columns:{base:1,md:2},gap:4,asChild:!0,children:e.jsxs("form",{id:"service-form",onSubmit:j(A),noValidate:!0,children:[e.jsx(U,{heading:"Add Service",description:"Add new service"}),e.jsx(s,{control:i,required:!0,backendError:a.title_en,name:"title_en",label:"Title (EN)"}),e.jsx(s,{control:i,required:!0,backendError:a.title_np,name:"title_np",label:"Title (NP)"}),e.jsx(s,{control:i,required:!0,backendError:a.description_en,name:"description_en",label:"Description (EN)",type:"textarea"}),e.jsx(s,{control:i,required:!0,backendError:a.description_np,name:"description_np",label:"Description (NP)",type:"textarea"}),e.jsx(s,{control:i,required:!0,backendError:a.display_order,name:"display_order",label:"Display Order",type:"number"}),e.jsx(W,{control:i,required:!0,name:"is_active",label:"Status",options:[{label:"Active",value:"1"},{label:"Inactive",value:"0"}]}),e.jsx(Q,{control:i,required:!0,backendError:a.image,name:"image",label:"Image",options:{accept:{"image/*":[]},maxSize:5},file:((x=r==null?void 0:r.data)==null?void 0:x.image)??"",setRemoveImage:I})]})}),e.jsxs(z,{align:"center",children:[e.jsx(S,{onClick:()=>u(-1),variant:"outline",children:"Cancel"}),e.jsx(S,{form:"service-form",loading:D||F,type:"submit",children:"Submit"})]})]})})};export{ne as default};
